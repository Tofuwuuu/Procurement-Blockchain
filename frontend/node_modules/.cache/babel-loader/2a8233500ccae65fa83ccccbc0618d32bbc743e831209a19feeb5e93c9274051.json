{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\BLOCKCHAIN\\\\frontend\\\\src\\\\pages\\\\Blockchain.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Table, Button, Badge, Accordion, Form, Modal, Alert, Spinner } from 'react-bootstrap';\nimport { apiService } from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport Toast from '../components/Toast';\n\n// Realistic blockchain data for procurement system\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst realisticBlocks = [{\n  index: 0,\n  timestamp: \"2025-01-01T00:00:00Z\",\n  transactions: [{\n    from: \"system\",\n    to: \"genesis\",\n    amount: 0,\n    action: \"genesis\",\n    data: {\n      message: \"Philippine Procurement Solutions Blockchain Initialized\"\n    },\n    timestamp: \"2025-01-01T00:00:00Z\"\n  }],\n  nonce: 0,\n  hash: \"0000000000000000000000000000000000000000000000000000000000000000\",\n  previous_hash: \"0\"\n}, {\n  index: 1,\n  timestamp: \"2025-01-15T10:30:00Z\",\n  transactions: [{\n    from: \"procurement0\",\n    to: \"blockchain\",\n    amount: 60000.00,\n    action: \"po_create\",\n    data: {\n      po_number: \"PO-20250101-001\",\n      supplier: \"TechDistributors Inc\",\n      amount: 60000.00,\n      items: [\"Office Chairs - Ergonomic\", \"Laptop Stands\"]\n    },\n    timestamp: \"2025-01-15T10:30:00Z\"\n  }, {\n    from: \"procurement0\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"supplier_add\",\n    data: {\n      supplier_name: \"TechDistributors Inc\",\n      bir_tin: \"123-456-789-000\",\n      contact: \"Juan Dela Cruz\"\n    },\n    timestamp: \"2025-01-15T10:25:00Z\"\n  }],\n  nonce: 12345,\n  hash: \"0000000000000000000000000000000000000000000000000000000000000001\",\n  previous_hash: \"0000000000000000000000000000000000000000000000000000000000000000\"\n}, {\n  index: 2,\n  timestamp: \"2025-01-16T14:20:00Z\",\n  transactions: [{\n    from: \"admin\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"po_approve\",\n    data: {\n      po_number: \"PO-20250101-001\",\n      approved_by: \"admin\",\n      approval_notes: \"Approved for procurement\"\n    },\n    timestamp: \"2025-01-16T14:20:00Z\"\n  }, {\n    from: \"procurement1\",\n    to: \"blockchain\",\n    amount: 45000.00,\n    action: \"po_create\",\n    data: {\n      po_number: \"PO-20250101-002\",\n      supplier: \"ABC Supplies\",\n      amount: 45000.00,\n      items: [\"Wireless Keyboards\", \"Desk Organizers\"]\n    },\n    timestamp: \"2025-01-16T14:15:00Z\"\n  }, {\n    from: \"procurement1\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"supplier_add\",\n    data: {\n      supplier_name: \"ABC Supplies\",\n      bir_tin: \"234-567-890-000\",\n      contact: \"Maria Santos\"\n    },\n    timestamp: \"2025-01-16T14:10:00Z\"\n  }],\n  nonce: 23456,\n  hash: \"0000000000000000000000000000000000000000000000000000000000000002\",\n  previous_hash: \"0000000000000000000000000000000000000000000000000000000000000001\"\n}, {\n  index: 3,\n  timestamp: \"2025-01-17T09:45:00Z\",\n  transactions: [{\n    from: \"admin\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"po_approve\",\n    data: {\n      po_number: \"PO-20250101-002\",\n      approved_by: \"admin\",\n      approval_notes: \"Approved with minor adjustments\"\n    },\n    timestamp: \"2025-01-17T09:45:00Z\"\n  }, {\n    from: \"procurement2\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"inventory_adjust\",\n    data: {\n      item: \"Office Chairs - Ergonomic\",\n      quantity: 20,\n      adjustment_type: \"received\",\n      reference: \"PO-20250101-001\"\n    },\n    timestamp: \"2025-01-17T09:40:00Z\"\n  }, {\n    from: \"procurement2\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"inventory_adjust\",\n    data: {\n      item: \"Laptop Stands\",\n      quantity: 10,\n      adjustment_type: \"received\",\n      reference: \"PO-20250101-001\"\n    },\n    timestamp: \"2025-01-17T09:35:00Z\"\n  }],\n  nonce: 34567,\n  hash: \"0000000000000000000000000000000000000000000000000000000000000003\",\n  previous_hash: \"0000000000000000000000000000000000000000000000000000000000000002\"\n}, {\n  index: 4,\n  timestamp: \"2025-01-18T16:30:00Z\",\n  transactions: [{\n    from: \"procurement0\",\n    to: \"blockchain\",\n    amount: 75000.00,\n    action: \"po_create\",\n    data: {\n      po_number: \"PO-20250101-003\",\n      supplier: \"Metro Manila Electronics\",\n      amount: 75000.00,\n      items: [\"Office Chairs - Ergonomic\", \"Laptop Stands\"]\n    },\n    timestamp: \"2025-01-18T16:30:00Z\"\n  }, {\n    from: \"procurement0\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"supplier_add\",\n    data: {\n      supplier_name: \"Metro Manila Electronics\",\n      bir_tin: \"345-678-901-000\",\n      contact: \"Pedro Martinez\"\n    },\n    timestamp: \"2025-01-18T16:25:00Z\"\n  }, {\n    from: \"finance1\",\n    to: \"blockchain\",\n    amount: 60000.00,\n    action: \"payment_processed\",\n    data: {\n      po_number: \"PO-20250101-001\",\n      amount: 60000.00,\n      payment_method: \"bank_transfer\",\n      reference: \"PAY-20250118-001\"\n    },\n    timestamp: \"2025-01-18T16:20:00Z\"\n  }],\n  nonce: 45678,\n  hash: \"0000000000000000000000000000000000000000000000000000000000000004\",\n  previous_hash: \"0000000000000000000000000000000000000000000000000000000000000003\"\n}, {\n  index: 5,\n  timestamp: \"2025-01-19T11:15:00Z\",\n  transactions: [{\n    from: \"admin\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"po_approve\",\n    data: {\n      po_number: \"PO-20250101-003\",\n      approved_by: \"admin\",\n      approval_notes: \"Approved for premium delivery\"\n    },\n    timestamp: \"2025-01-19T11:15:00Z\"\n  }, {\n    from: \"procurement1\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"inventory_adjust\",\n    data: {\n      item: \"Wireless Keyboards\",\n      quantity: 30,\n      adjustment_type: \"received\",\n      reference: \"PO-20250101-002\"\n    },\n    timestamp: \"2025-01-19T11:10:00Z\"\n  }, {\n    from: \"procurement1\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"inventory_adjust\",\n    data: {\n      item: \"Desk Organizers\",\n      quantity: 25,\n      adjustment_type: \"received\",\n      reference: \"PO-20250101-002\"\n    },\n    timestamp: \"2025-01-19T11:05:00Z\"\n  }, {\n    from: \"validator1\",\n    to: \"blockchain\",\n    amount: 0,\n    action: \"quality_check\",\n    data: {\n      po_number: \"PO-20250101-002\",\n      status: \"passed\",\n      inspector: \"Ana Reyes\",\n      notes: \"All items meet quality standards\"\n    },\n    timestamp: \"2025-01-19T11:00:00Z\"\n  }],\n  nonce: 56789,\n  hash: \"0000000000000000000000000000000000000000000000000000000000000005\",\n  previous_hash: \"0000000000000000000000000000000000000000000000000000000000000004\"\n}];\nconst realisticPeers = [{\n  id: \"node-001\",\n  url: \"http://localhost:3002\",\n  is_active: true\n}, {\n  id: \"node-002\",\n  url: \"http://localhost:3003\",\n  is_active: true\n}, {\n  id: \"node-003\",\n  url: \"http://localhost:3004\",\n  is_active: false\n}];\nconst Blockchain = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [blocks, setBlocks] = useState([]);\n  const [peers, setPeers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [mining, setMining] = useState(false);\n  const [showAddPeer, setShowAddPeer] = useState(false);\n  const [newPeerUrl, setNewPeerUrl] = useState('');\n  const [showToast, setShowToast] = useState(false);\n  const [toastMessage, setToastMessage] = useState('');\n  const [toastType, setToastType] = useState('info');\n  const [usingRealData, setUsingRealData] = useState(false);\n  useEffect(() => {\n    fetchBlockchainData();\n  }, []);\n\n  // Load peers from localStorage when in demo mode\n  useEffect(() => {\n    if (usingRealData) {\n      const savedPeers = localStorage.getItem('blockchain_demo_peers');\n      if (savedPeers) {\n        try {\n          const parsedPeers = JSON.parse(savedPeers);\n          setPeers(parsedPeers);\n        } catch (error) {\n          console.error('Failed to parse saved peers:', error);\n        }\n      }\n    }\n  }, [usingRealData]);\n  const fetchBlockchainData = async () => {\n    try {\n      setLoading(true);\n\n      // Try to fetch from API first\n      try {\n        const [chainData, peersData] = await Promise.all([apiService.getBlockchain(), apiService.getPeers()]);\n\n        // Check if we have real blockchain data\n        if (chainData.chain && chainData.chain.length > 0) {\n          setBlocks(chainData.chain);\n          setPeers(peersData);\n          setUsingRealData(false);\n          console.log('Connected to backend blockchain:', chainData.chain.length, 'blocks');\n        } else {\n          // If backend has no data, seed it with realistic data\n          console.log('Backend has no blockchain data, seeding with realistic data...');\n          await seedBackendWithData();\n          setBlocks(realisticBlocks);\n          setPeers(realisticPeers);\n          setUsingRealData(true);\n          setToastMessage('Backend initialized with realistic blockchain data');\n          setToastType('success');\n          setShowToast(true);\n        }\n      } catch (apiError) {\n        console.log('API not available, using realistic blockchain data...');\n        // Use realistic data if API fails\n        setBlocks(realisticBlocks);\n\n        // Load saved peers or use default realistic peers\n        const savedPeers = localStorage.getItem('blockchain_demo_peers');\n        if (savedPeers) {\n          try {\n            const parsedPeers = JSON.parse(savedPeers);\n            setPeers(parsedPeers);\n          } catch (error) {\n            setPeers(realisticPeers);\n          }\n        } else {\n          setPeers(realisticPeers);\n        }\n        setUsingRealData(true);\n\n        // No notification needed for realistic data fallback\n      }\n    } catch (error) {\n      console.error('Failed to fetch blockchain data:', error);\n      // Fallback to realistic data\n      setBlocks(realisticBlocks);\n\n      // Load saved peers or use default realistic peers\n      const savedPeers = localStorage.getItem('blockchain_demo_peers');\n      if (savedPeers) {\n        try {\n          const parsedPeers = JSON.parse(savedPeers);\n          setPeers(parsedPeers);\n        } catch (error) {\n          setPeers(realisticPeers);\n        }\n      } else {\n        setPeers(realisticPeers);\n      }\n      setUsingRealData(true);\n\n      // No notification needed for fallback data\n    } finally {\n      setLoading(false);\n    }\n  };\n  const seedBackendWithData = async () => {\n    try {\n      // Create realistic transactions in the backend\n      const transactions = [{\n        from: \"procurement0\",\n        to: \"blockchain\",\n        amount: 60000.00,\n        action: \"po_create\",\n        data: {\n          po_number: \"PO-20250101-001\",\n          supplier: \"TechDistributors Inc\",\n          amount: 60000.00,\n          items: [\"Office Chairs - Ergonomic\", \"Laptop Stands\"]\n        }\n      }, {\n        from: \"procurement0\",\n        to: \"blockchain\",\n        amount: 0,\n        action: \"supplier_add\",\n        data: {\n          supplier_name: \"TechDistributors Inc\",\n          bir_tin: \"123-456-789-000\",\n          contact: \"Juan Dela Cruz\"\n        }\n      }, {\n        from: \"admin\",\n        to: \"blockchain\",\n        amount: 0,\n        action: \"po_approve\",\n        data: {\n          po_number: \"PO-20250101-001\",\n          approved_by: \"admin\",\n          approval_notes: \"Approved for procurement\"\n        }\n      }];\n\n      // Add transactions to backend\n      for (const tx of transactions) {\n        try {\n          await apiService.createTransaction(tx);\n        } catch (error) {\n          console.log('Transaction already exists or failed:', error);\n        }\n      }\n\n      // Mine a block to include the transactions\n      try {\n        await apiService.mineBlock();\n      } catch (error) {\n        console.log('Mining failed:', error);\n      }\n    } catch (error) {\n      console.error('Failed to seed backend data:', error);\n    }\n  };\n  const handleMine = async () => {\n    try {\n      setMining(true);\n      if (usingRealData) {\n        var _blocks;\n        // Simulate mining for realistic data\n        const newBlock = {\n          index: blocks.length,\n          timestamp: new Date().toISOString(),\n          transactions: [{\n            from: (user === null || user === void 0 ? void 0 : user.username) || \"admin\",\n            to: \"blockchain\",\n            amount: 50.00,\n            action: \"block_mined\",\n            data: {\n              miner: (user === null || user === void 0 ? void 0 : user.username) || \"admin\",\n              difficulty: 4,\n              reward: 50.00\n            },\n            timestamp: new Date().toISOString()\n          }],\n          nonce: Math.floor(Math.random() * 100000),\n          hash: `000000000000000000000000000000000000000000000000000000000000000${blocks.length}`,\n          previous_hash: ((_blocks = blocks[blocks.length - 1]) === null || _blocks === void 0 ? void 0 : _blocks.hash) || \"0\"\n        };\n        setBlocks([...blocks, newBlock]);\n        setToastMessage(`Block ${newBlock.index} mined successfully! (Demo)`);\n        setToastType('success');\n        setShowToast(true);\n      } else {\n        // Real API call\n        const newBlock = await apiService.mineBlock();\n        setToastMessage(`Block ${newBlock.index} mined successfully!`);\n        setToastType('success');\n        setShowToast(true);\n        fetchBlockchainData(); // Refresh data\n      }\n    } catch (error) {\n      console.error('Mining failed:', error);\n      setToastMessage('Mining failed');\n      setToastType('error');\n      setShowToast(true);\n    } finally {\n      setMining(false);\n    }\n  };\n  const handleAddPeer = async () => {\n    if (!newPeerUrl.trim()) return;\n    try {\n      if (usingRealData) {\n        // Simulate adding peer for realistic data\n        const newPeer = {\n          id: `node-${String(peers.length + 1).padStart(3, '0')}`,\n          url: newPeerUrl,\n          is_active: true\n        };\n        const updatedPeers = [...peers, newPeer];\n        setPeers(updatedPeers);\n\n        // Save to localStorage for persistence\n        localStorage.setItem('blockchain_demo_peers', JSON.stringify(updatedPeers));\n        setToastMessage('Peer added successfully (Demo)');\n        setToastType('success');\n        setShowToast(true);\n        setShowAddPeer(false);\n        setNewPeerUrl('');\n      } else {\n        // Real API call\n        await apiService.addPeer(newPeerUrl);\n        setToastMessage('Peer added successfully');\n        setToastType('success');\n        setShowToast(true);\n        setShowAddPeer(false);\n        setNewPeerUrl('');\n        fetchBlockchainData(); // Refresh peers\n      }\n    } catch (error) {\n      console.error('Failed to add peer:', error);\n      setToastMessage('Failed to add peer');\n      setToastType('error');\n      setShowToast(true);\n    }\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleString('en-PH');\n  };\n  const truncateHash = (hash, length = 8) => {\n    return hash.length > length ? `${hash.substring(0, length)}...` : hash;\n  };\n  const getTransactionType = action => {\n    const types = {\n      'genesis': {\n        variant: 'dark',\n        text: 'Genesis Block'\n      },\n      'po_create': {\n        variant: 'primary',\n        text: 'PO Created'\n      },\n      'po_approve': {\n        variant: 'success',\n        text: 'PO Approved'\n      },\n      'inventory_adjust': {\n        variant: 'warning',\n        text: 'Inventory Adjusted'\n      },\n      'supplier_add': {\n        variant: 'info',\n        text: 'Supplier Added'\n      },\n      'payment_processed': {\n        variant: 'success',\n        text: 'Payment Processed'\n      },\n      'quality_check': {\n        variant: 'info',\n        text: 'Quality Check'\n      },\n      'block_mined': {\n        variant: 'secondary',\n        text: 'Block Mined'\n      },\n      'default': {\n        variant: 'secondary',\n        text: action\n      }\n    };\n    return types[action] || types.default;\n  };\n  const formatTransactionData = data => {\n    if (typeof data === 'string') return data;\n    if (data.po_number) return `PO: ${data.po_number}`;\n    if (data.supplier_name) return `Supplier: ${data.supplier_name}`;\n    if (data.item) return `Item: ${data.item}`;\n    if (data.amount) return `Amount: â‚±${data.amount.toLocaleString()}`;\n    if (data.message) return data.message;\n    return JSON.stringify(data, null, 2);\n  };\n  const clearDemoData = () => {\n    localStorage.removeItem('blockchain_demo_peers');\n    setPeers(realisticPeers);\n    setToastMessage('Demo data cleared');\n    setToastType('info');\n    setShowToast(true);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n        size: \"lg\",\n        text: \"Loading blockchain data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"h2 mb-1\",\n              children: \"Blockchain Explorer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: [\"View blockchain transactions and manage network peers\", usingRealData && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ms-2 badge bg-info text-dark\",\n                children: \"Realistic Data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex gap-2\",\n            children: [(user === null || user === void 0 ? void 0 : user.is_admin) && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              onClick: handleMine,\n              disabled: mining,\n              \"aria-label\": \"Mine new block\",\n              children: mining ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Spinner, {\n                  animation: \"border\",\n                  size: \"sm\",\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 617,\n                  columnNumber: 23\n                }, this), \"Mining...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-hammer me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 23\n                }, this), \"Mine Block\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-primary\",\n              onClick: () => setShowAddPeer(true),\n              \"aria-label\": \"Add new peer\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus-circle me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 18\n              }, this), \"Add Peer\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 30\n            }, this), usingRealData && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-secondary\",\n              onClick: clearDemoData,\n              \"aria-label\": \"Clear demo data\",\n              size: \"sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-trash me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 20\n              }, this), \"Clear Demo\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"g-3 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-primary mb-1\",\n              children: blocks.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: \"Total Blocks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-success mb-1\",\n              children: blocks.reduce((total, block) => total + block.transactions.length, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: \"Total Transactions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-info mb-1\",\n              children: peers.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: \"Network Peers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-0\",\n          children: \"Blockchain Chain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        className: \"p-0\",\n        children: /*#__PURE__*/_jsxDEV(Accordion, {\n          children: blocks.map((block, index) => /*#__PURE__*/_jsxDEV(Accordion.Item, {\n            eventKey: index.toString(),\n            children: [/*#__PURE__*/_jsxDEV(Accordion.Header, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center w-100\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fw-bold me-3\",\n                  children: [\"Block #\", block.index]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: \"secondary\",\n                  className: \"me-3\",\n                  children: [block.transactions.length, \" transactions\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 694,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted ms-auto\",\n                  children: formatDate(block.timestamp)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 697,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Accordion.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                className: \"g-3 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Hash:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 705,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n                    className: \"ms-2\",\n                    children: truncateHash(block.hash)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 706,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 704,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Previous Hash:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 709,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n                    className: \"ms-2\",\n                    children: truncateHash(block.previous_hash)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 710,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Nonce:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 23\n                  }, this), \" \", block.nonce]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 712,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Timestamp:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 716,\n                    columnNumber: 23\n                  }, this), \" \", formatDate(block.timestamp)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 715,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 19\n              }, this), block.transactions.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n                striped: true,\n                bordered: true,\n                size: \"sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Sender\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 724,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Recipient\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 725,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Action\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 726,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Data\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 727,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Timestamp\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 728,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 723,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 722,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: block.transactions.map((tx, txIndex) => {\n                    const txType = getTransactionType(tx.action);\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"code\", {\n                          children: tx.from\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 737,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 736,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"code\", {\n                          children: tx.to\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 740,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 739,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(Badge, {\n                          bg: txType.variant,\n                          children: txType.text\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 743,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 742,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"small\", {\n                          className: \"text-muted\",\n                          children: formatTransactionData(tx.data)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 746,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 745,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: formatDate(tx.timestamp)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 750,\n                        columnNumber: 31\n                      }, this)]\n                    }, txIndex, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 735,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n                variant: \"info\",\n                className: \"mb-0\",\n                children: \"No transactions in this block\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 17\n            }, this)]\n          }, block.index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-0\",\n          children: \"Network Peers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        className: \"p-0\",\n        children: peers.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          className: \"mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Peer ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"URL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: peers.map(peer => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: peer.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 787,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: peer.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 790,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 789,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: peer.is_active ? 'success' : 'danger',\n                  children: peer.is_active ? 'Active' : 'Inactive'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 793,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 792,\n                columnNumber: 21\n              }, this)]\n            }, peer.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 783,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-wifi-off text-muted\",\n            style: {\n              fontSize: '2rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 803,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted mt-2\",\n            children: \"No peers connected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 804,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 802,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showAddPeer,\n      onHide: () => setShowAddPeer(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Add New Peer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 813,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 812,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              htmlFor: \"peerUrl\",\n              children: \"Peer URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              id: \"peerUrl\",\n              type: \"url\",\n              placeholder: \"http://localhost:5001\",\n              value: newPeerUrl,\n              onChange: e => setNewPeerUrl(e.target.value),\n              \"aria-describedby\": \"peerUrlHelp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              id: \"peerUrlHelp\",\n              className: \"text-muted\",\n              children: \"Enter the URL of the peer node you want to connect to\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 816,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 815,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowAddPeer(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleAddPeer,\n          disabled: !newPeerUrl.trim(),\n          children: \"Add Peer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 837,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 833,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 811,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toast, {\n      show: showToast,\n      message: toastMessage,\n      type: toastType,\n      onClose: () => setShowToast(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 844,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 593,\n    columnNumber: 5\n  }, this);\n};\n_s(Blockchain, \"P8X2DLr52T4RfHCr+c7usnEeN4o=\", false, function () {\n  return [useAuth];\n});\n_c = Blockchain;\nexport default Blockchain;\nvar _c;\n$RefreshReg$(_c, \"Blockchain\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Table","Button","Badge","Accordion","Form","Modal","Alert","Spinner","apiService","useAuth","LoadingSpinner","Toast","jsxDEV","_jsxDEV","Fragment","_Fragment","realisticBlocks","index","timestamp","transactions","from","to","amount","action","data","message","nonce","hash","previous_hash","po_number","supplier","items","supplier_name","bir_tin","contact","approved_by","approval_notes","item","quantity","adjustment_type","reference","payment_method","status","inspector","notes","realisticPeers","id","url","is_active","Blockchain","_s","user","blocks","setBlocks","peers","setPeers","loading","setLoading","mining","setMining","showAddPeer","setShowAddPeer","newPeerUrl","setNewPeerUrl","showToast","setShowToast","toastMessage","setToastMessage","toastType","setToastType","usingRealData","setUsingRealData","fetchBlockchainData","savedPeers","localStorage","getItem","parsedPeers","JSON","parse","error","console","chainData","peersData","Promise","all","getBlockchain","getPeers","chain","length","log","seedBackendWithData","apiError","tx","createTransaction","mineBlock","handleMine","_blocks","newBlock","Date","toISOString","username","miner","difficulty","reward","Math","floor","random","handleAddPeer","trim","newPeer","String","padStart","updatedPeers","setItem","stringify","addPeer","formatDate","dateString","toLocaleString","truncateHash","substring","getTransactionType","types","variant","text","default","formatTransactionData","clearDemoData","removeItem","children","size","fileName","_jsxFileName","lineNumber","columnNumber","className","is_admin","onClick","disabled","animation","md","Body","reduce","total","block","Header","map","Item","eventKey","toString","bg","striped","bordered","txIndex","txType","peer","style","fontSize","show","onHide","closeButton","Title","Group","Label","htmlFor","Control","type","placeholder","value","onChange","e","target","Text","Footer","onClose","_c","$RefreshReg$"],"sources":["E:/Projects/BLOCKCHAIN/frontend/src/pages/Blockchain.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Container, Row, Col, Card, Table, Button, Badge, \r\n  Accordion, Form, Modal, Alert, Spinner \r\n} from 'react-bootstrap';\r\nimport { apiService, Block, Transaction, Peer } from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport Toast from '../components/Toast';\r\n\r\n// Realistic blockchain data for procurement system\r\nconst realisticBlocks: Block[] = [\r\n  {\r\n    index: 0,\r\n    timestamp: \"2025-01-01T00:00:00Z\",\r\n    transactions: [\r\n      {\r\n        from: \"system\",\r\n        to: \"genesis\",\r\n        amount: 0,\r\n        action: \"genesis\",\r\n        data: { message: \"Philippine Procurement Solutions Blockchain Initialized\" },\r\n        timestamp: \"2025-01-01T00:00:00Z\"\r\n      }\r\n    ],\r\n    nonce: 0,\r\n    hash: \"0000000000000000000000000000000000000000000000000000000000000000\",\r\n    previous_hash: \"0\"\r\n  },\r\n  {\r\n    index: 1,\r\n    timestamp: \"2025-01-15T10:30:00Z\",\r\n    transactions: [\r\n      {\r\n        from: \"procurement0\",\r\n        to: \"blockchain\",\r\n        amount: 60000.00,\r\n        action: \"po_create\",\r\n        data: {\r\n          po_number: \"PO-20250101-001\",\r\n          supplier: \"TechDistributors Inc\",\r\n          amount: 60000.00,\r\n          items: [\"Office Chairs - Ergonomic\", \"Laptop Stands\"]\r\n        },\r\n        timestamp: \"2025-01-15T10:30:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement0\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"supplier_add\",\r\n        data: {\r\n          supplier_name: \"TechDistributors Inc\",\r\n          bir_tin: \"123-456-789-000\",\r\n          contact: \"Juan Dela Cruz\"\r\n        },\r\n        timestamp: \"2025-01-15T10:25:00Z\"\r\n      }\r\n    ],\r\n    nonce: 12345,\r\n    hash: \"0000000000000000000000000000000000000000000000000000000000000001\",\r\n    previous_hash: \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n  },\r\n  {\r\n    index: 2,\r\n    timestamp: \"2025-01-16T14:20:00Z\",\r\n    transactions: [\r\n      {\r\n        from: \"admin\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"po_approve\",\r\n        data: {\r\n          po_number: \"PO-20250101-001\",\r\n          approved_by: \"admin\",\r\n          approval_notes: \"Approved for procurement\"\r\n        },\r\n        timestamp: \"2025-01-16T14:20:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement1\",\r\n        to: \"blockchain\",\r\n        amount: 45000.00,\r\n        action: \"po_create\",\r\n        data: {\r\n          po_number: \"PO-20250101-002\",\r\n          supplier: \"ABC Supplies\",\r\n          amount: 45000.00,\r\n          items: [\"Wireless Keyboards\", \"Desk Organizers\"]\r\n        },\r\n        timestamp: \"2025-01-16T14:15:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement1\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"supplier_add\",\r\n        data: {\r\n          supplier_name: \"ABC Supplies\",\r\n          bir_tin: \"234-567-890-000\",\r\n          contact: \"Maria Santos\"\r\n        },\r\n        timestamp: \"2025-01-16T14:10:00Z\"\r\n      }\r\n    ],\r\n    nonce: 23456,\r\n    hash: \"0000000000000000000000000000000000000000000000000000000000000002\",\r\n    previous_hash: \"0000000000000000000000000000000000000000000000000000000000000001\"\r\n  },\r\n  {\r\n    index: 3,\r\n    timestamp: \"2025-01-17T09:45:00Z\",\r\n    transactions: [\r\n      {\r\n        from: \"admin\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"po_approve\",\r\n        data: {\r\n          po_number: \"PO-20250101-002\",\r\n          approved_by: \"admin\",\r\n          approval_notes: \"Approved with minor adjustments\"\r\n        },\r\n        timestamp: \"2025-01-17T09:45:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement2\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"inventory_adjust\",\r\n        data: {\r\n          item: \"Office Chairs - Ergonomic\",\r\n          quantity: 20,\r\n          adjustment_type: \"received\",\r\n          reference: \"PO-20250101-001\"\r\n        },\r\n        timestamp: \"2025-01-17T09:40:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement2\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"inventory_adjust\",\r\n        data: {\r\n          item: \"Laptop Stands\",\r\n          quantity: 10,\r\n          adjustment_type: \"received\",\r\n          reference: \"PO-20250101-001\"\r\n        },\r\n        timestamp: \"2025-01-17T09:35:00Z\"\r\n      }\r\n    ],\r\n    nonce: 34567,\r\n    hash: \"0000000000000000000000000000000000000000000000000000000000000003\",\r\n    previous_hash: \"0000000000000000000000000000000000000000000000000000000000000002\"\r\n  },\r\n  {\r\n    index: 4,\r\n    timestamp: \"2025-01-18T16:30:00Z\",\r\n    transactions: [\r\n      {\r\n        from: \"procurement0\",\r\n        to: \"blockchain\",\r\n        amount: 75000.00,\r\n        action: \"po_create\",\r\n        data: {\r\n          po_number: \"PO-20250101-003\",\r\n          supplier: \"Metro Manila Electronics\",\r\n          amount: 75000.00,\r\n          items: [\"Office Chairs - Ergonomic\", \"Laptop Stands\"]\r\n        },\r\n        timestamp: \"2025-01-18T16:30:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement0\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"supplier_add\",\r\n        data: {\r\n          supplier_name: \"Metro Manila Electronics\",\r\n          bir_tin: \"345-678-901-000\",\r\n          contact: \"Pedro Martinez\"\r\n        },\r\n        timestamp: \"2025-01-18T16:25:00Z\"\r\n      },\r\n      {\r\n        from: \"finance1\",\r\n        to: \"blockchain\",\r\n        amount: 60000.00,\r\n        action: \"payment_processed\",\r\n        data: {\r\n          po_number: \"PO-20250101-001\",\r\n          amount: 60000.00,\r\n          payment_method: \"bank_transfer\",\r\n          reference: \"PAY-20250118-001\"\r\n        },\r\n        timestamp: \"2025-01-18T16:20:00Z\"\r\n      }\r\n    ],\r\n    nonce: 45678,\r\n    hash: \"0000000000000000000000000000000000000000000000000000000000000004\",\r\n    previous_hash: \"0000000000000000000000000000000000000000000000000000000000000003\"\r\n  },\r\n  {\r\n    index: 5,\r\n    timestamp: \"2025-01-19T11:15:00Z\",\r\n    transactions: [\r\n      {\r\n        from: \"admin\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"po_approve\",\r\n        data: {\r\n          po_number: \"PO-20250101-003\",\r\n          approved_by: \"admin\",\r\n          approval_notes: \"Approved for premium delivery\"\r\n        },\r\n        timestamp: \"2025-01-19T11:15:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement1\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"inventory_adjust\",\r\n        data: {\r\n          item: \"Wireless Keyboards\",\r\n          quantity: 30,\r\n          adjustment_type: \"received\",\r\n          reference: \"PO-20250101-002\"\r\n        },\r\n        timestamp: \"2025-01-19T11:10:00Z\"\r\n      },\r\n      {\r\n        from: \"procurement1\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"inventory_adjust\",\r\n        data: {\r\n          item: \"Desk Organizers\",\r\n          quantity: 25,\r\n          adjustment_type: \"received\",\r\n          reference: \"PO-20250101-002\"\r\n        },\r\n        timestamp: \"2025-01-19T11:05:00Z\"\r\n      },\r\n      {\r\n        from: \"validator1\",\r\n        to: \"blockchain\",\r\n        amount: 0,\r\n        action: \"quality_check\",\r\n        data: {\r\n          po_number: \"PO-20250101-002\",\r\n          status: \"passed\",\r\n          inspector: \"Ana Reyes\",\r\n          notes: \"All items meet quality standards\"\r\n        },\r\n        timestamp: \"2025-01-19T11:00:00Z\"\r\n      }\r\n    ],\r\n    nonce: 56789,\r\n    hash: \"0000000000000000000000000000000000000000000000000000000000000005\",\r\n    previous_hash: \"0000000000000000000000000000000000000000000000000000000000000004\"\r\n  }\r\n];\r\n\r\nconst realisticPeers: Peer[] = [\r\n  {\r\n    id: \"node-001\",\r\n    url: \"http://localhost:3002\",\r\n    is_active: true\r\n  },\r\n  {\r\n    id: \"node-002\", \r\n    url: \"http://localhost:3003\",\r\n    is_active: true\r\n  },\r\n  {\r\n    id: \"node-003\",\r\n    url: \"http://localhost:3004\", \r\n    is_active: false\r\n  }\r\n];\r\n\r\nconst Blockchain: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [blocks, setBlocks] = useState<Block[]>([]);\r\n  const [peers, setPeers] = useState<Peer[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [mining, setMining] = useState(false);\r\n  const [showAddPeer, setShowAddPeer] = useState(false);\r\n  const [newPeerUrl, setNewPeerUrl] = useState('');\r\n  const [showToast, setShowToast] = useState(false);\r\n  const [toastMessage, setToastMessage] = useState('');\r\n  const [toastType, setToastType] = useState<'success' | 'error' | 'warning' | 'info'>('info');\r\n  const [usingRealData, setUsingRealData] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchBlockchainData();\r\n  }, []);\r\n\r\n  // Load peers from localStorage when in demo mode\r\n  useEffect(() => {\r\n    if (usingRealData) {\r\n      const savedPeers = localStorage.getItem('blockchain_demo_peers');\r\n      if (savedPeers) {\r\n        try {\r\n          const parsedPeers = JSON.parse(savedPeers);\r\n          setPeers(parsedPeers);\r\n        } catch (error) {\r\n          console.error('Failed to parse saved peers:', error);\r\n        }\r\n      }\r\n    }\r\n  }, [usingRealData]);\r\n\r\n  const fetchBlockchainData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Try to fetch from API first\r\n      try {\r\n        const [chainData, peersData] = await Promise.all([\r\n          apiService.getBlockchain(),\r\n          apiService.getPeers()\r\n        ]);\r\n        \r\n        // Check if we have real blockchain data\r\n        if (chainData.chain && chainData.chain.length > 0) {\r\n          setBlocks(chainData.chain);\r\n          setPeers(peersData);\r\n          setUsingRealData(false);\r\n          console.log('Connected to backend blockchain:', chainData.chain.length, 'blocks');\r\n        } else {\r\n          // If backend has no data, seed it with realistic data\r\n          console.log('Backend has no blockchain data, seeding with realistic data...');\r\n          await seedBackendWithData();\r\n          setBlocks(realisticBlocks);\r\n          setPeers(realisticPeers);\r\n          setUsingRealData(true);\r\n          setToastMessage('Backend initialized with realistic blockchain data');\r\n          setToastType('success');\r\n          setShowToast(true);\r\n        }\r\n             } catch (apiError) {\r\n         console.log('API not available, using realistic blockchain data...');\r\n         // Use realistic data if API fails\r\n         setBlocks(realisticBlocks);\r\n         \r\n         // Load saved peers or use default realistic peers\r\n         const savedPeers = localStorage.getItem('blockchain_demo_peers');\r\n        if (savedPeers) {\r\n          try {\r\n            const parsedPeers = JSON.parse(savedPeers);\r\n            setPeers(parsedPeers);\r\n          } catch (error) {\r\n            setPeers(realisticPeers);\r\n          }\r\n        } else {\r\n          setPeers(realisticPeers);\r\n        }\r\n        \r\n        setUsingRealData(true);\r\n        \r\n        // No notification needed for realistic data fallback\r\n       }\r\n           } catch (error) {\r\n         console.error('Failed to fetch blockchain data:', error);\r\n         // Fallback to realistic data\r\n         setBlocks(realisticBlocks);\r\n         \r\n         // Load saved peers or use default realistic peers\r\n         const savedPeers = localStorage.getItem('blockchain_demo_peers');\r\n         if (savedPeers) {\r\n           try {\r\n             const parsedPeers = JSON.parse(savedPeers);\r\n             setPeers(parsedPeers);\r\n           } catch (error) {\r\n             setPeers(realisticPeers);\r\n           }\r\n         } else {\r\n           setPeers(realisticPeers);\r\n         }\r\n         \r\n         setUsingRealData(true);\r\n         \r\n         // No notification needed for fallback data\r\n       } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const seedBackendWithData = async () => {\r\n    try {\r\n      // Create realistic transactions in the backend\r\n      const transactions = [\r\n        {\r\n          from: \"procurement0\",\r\n          to: \"blockchain\",\r\n          amount: 60000.00,\r\n          action: \"po_create\",\r\n          data: {\r\n            po_number: \"PO-20250101-001\",\r\n            supplier: \"TechDistributors Inc\",\r\n            amount: 60000.00,\r\n            items: [\"Office Chairs - Ergonomic\", \"Laptop Stands\"]\r\n          }\r\n        },\r\n        {\r\n          from: \"procurement0\",\r\n          to: \"blockchain\",\r\n          amount: 0,\r\n          action: \"supplier_add\",\r\n          data: {\r\n            supplier_name: \"TechDistributors Inc\",\r\n            bir_tin: \"123-456-789-000\",\r\n            contact: \"Juan Dela Cruz\"\r\n          }\r\n        },\r\n        {\r\n          from: \"admin\",\r\n          to: \"blockchain\",\r\n          amount: 0,\r\n          action: \"po_approve\",\r\n          data: {\r\n            po_number: \"PO-20250101-001\",\r\n            approved_by: \"admin\",\r\n            approval_notes: \"Approved for procurement\"\r\n          }\r\n        }\r\n      ];\r\n\r\n      // Add transactions to backend\r\n      for (const tx of transactions) {\r\n        try {\r\n          await apiService.createTransaction(tx);\r\n        } catch (error) {\r\n          console.log('Transaction already exists or failed:', error);\r\n        }\r\n      }\r\n\r\n      // Mine a block to include the transactions\r\n      try {\r\n        await apiService.mineBlock();\r\n      } catch (error) {\r\n        console.log('Mining failed:', error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to seed backend data:', error);\r\n    }\r\n  };\r\n\r\n  const handleMine = async () => {\r\n    try {\r\n      setMining(true);\r\n      \r\n      if (usingRealData) {\r\n        // Simulate mining for realistic data\r\n        const newBlock: Block = {\r\n          index: blocks.length,\r\n          timestamp: new Date().toISOString(),\r\n          transactions: [\r\n            {\r\n              from: user?.username || \"admin\",\r\n              to: \"blockchain\",\r\n              amount: 50.00,\r\n              action: \"block_mined\",\r\n              data: {\r\n                miner: user?.username || \"admin\",\r\n                difficulty: 4,\r\n                reward: 50.00\r\n              },\r\n              timestamp: new Date().toISOString()\r\n            }\r\n          ],\r\n          nonce: Math.floor(Math.random() * 100000),\r\n          hash: `000000000000000000000000000000000000000000000000000000000000000${blocks.length}`,\r\n          previous_hash: blocks[blocks.length - 1]?.hash || \"0\"\r\n        };\r\n        \r\n        setBlocks([...blocks, newBlock]);\r\n        setToastMessage(`Block ${newBlock.index} mined successfully! (Demo)`);\r\n        setToastType('success');\r\n        setShowToast(true);\r\n      } else {\r\n        // Real API call\r\n        const newBlock = await apiService.mineBlock();\r\n        setToastMessage(`Block ${newBlock.index} mined successfully!`);\r\n        setToastType('success');\r\n        setShowToast(true);\r\n        fetchBlockchainData(); // Refresh data\r\n      }\r\n    } catch (error) {\r\n      console.error('Mining failed:', error);\r\n      setToastMessage('Mining failed');\r\n      setToastType('error');\r\n      setShowToast(true);\r\n    } finally {\r\n      setMining(false);\r\n    }\r\n  };\r\n\r\n  const handleAddPeer = async () => {\r\n    if (!newPeerUrl.trim()) return;\r\n\r\n    try {\r\n             if (usingRealData) {\r\n         // Simulate adding peer for realistic data\r\n         const newPeer: Peer = {\r\n           id: `node-${String(peers.length + 1).padStart(3, '0')}`,\r\n           url: newPeerUrl,\r\n           is_active: true\r\n         };\r\n         \r\n         const updatedPeers = [...peers, newPeer];\r\n         setPeers(updatedPeers);\r\n         \r\n         // Save to localStorage for persistence\r\n         localStorage.setItem('blockchain_demo_peers', JSON.stringify(updatedPeers));\r\n         \r\n         setToastMessage('Peer added successfully (Demo)');\r\n         setToastType('success');\r\n         setShowToast(true);\r\n         setShowAddPeer(false);\r\n         setNewPeerUrl('');\r\n       } else {\r\n        // Real API call\r\n        await apiService.addPeer(newPeerUrl);\r\n        setToastMessage('Peer added successfully');\r\n        setToastType('success');\r\n        setShowToast(true);\r\n        setShowAddPeer(false);\r\n        setNewPeerUrl('');\r\n        fetchBlockchainData(); // Refresh peers\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to add peer:', error);\r\n      setToastMessage('Failed to add peer');\r\n      setToastType('error');\r\n      setShowToast(true);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string): string => {\r\n    return new Date(dateString).toLocaleString('en-PH');\r\n  };\r\n\r\n  const truncateHash = (hash: string, length: number = 8): string => {\r\n    return hash.length > length ? `${hash.substring(0, length)}...` : hash;\r\n  };\r\n\r\n  const getTransactionType = (action: string): { variant: string; text: string } => {\r\n    const types = {\r\n      'genesis': { variant: 'dark', text: 'Genesis Block' },\r\n      'po_create': { variant: 'primary', text: 'PO Created' },\r\n      'po_approve': { variant: 'success', text: 'PO Approved' },\r\n      'inventory_adjust': { variant: 'warning', text: 'Inventory Adjusted' },\r\n      'supplier_add': { variant: 'info', text: 'Supplier Added' },\r\n      'payment_processed': { variant: 'success', text: 'Payment Processed' },\r\n      'quality_check': { variant: 'info', text: 'Quality Check' },\r\n      'block_mined': { variant: 'secondary', text: 'Block Mined' },\r\n      'default': { variant: 'secondary', text: action }\r\n    };\r\n    return types[action as keyof typeof types] || types.default;\r\n  };\r\n\r\n  const formatTransactionData = (data: any): string => {\r\n    if (typeof data === 'string') return data;\r\n    if (data.po_number) return `PO: ${data.po_number}`;\r\n    if (data.supplier_name) return `Supplier: ${data.supplier_name}`;\r\n    if (data.item) return `Item: ${data.item}`;\r\n    if (data.amount) return `Amount: â‚±${data.amount.toLocaleString()}`;\r\n    if (data.message) return data.message;\r\n    return JSON.stringify(data, null, 2);\r\n  };\r\n\r\n  const clearDemoData = () => {\r\n    localStorage.removeItem('blockchain_demo_peers');\r\n    setPeers(realisticPeers);\r\n    setToastMessage('Demo data cleared');\r\n    setToastType('info');\r\n    setShowToast(true);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <LoadingSpinner size=\"lg\" text=\"Loading blockchain data...\" />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      {/* Header */}\r\n      <Row className=\"mb-4\">\r\n        <Col>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <div>\r\n              <h1 className=\"h2 mb-1\">Blockchain Explorer</h1>\r\n              <p className=\"text-muted mb-0\">\r\n                View blockchain transactions and manage network peers\r\n                {usingRealData && (\r\n                  <span className=\"ms-2 badge bg-info text-dark\">Realistic Data</span>\r\n                )}\r\n              </p>\r\n            </div>\r\n            <div className=\"d-flex gap-2\">\r\n              {user?.is_admin && (\r\n                <Button \r\n                  variant=\"success\" \r\n                  onClick={handleMine}\r\n                  disabled={mining}\r\n                  aria-label=\"Mine new block\"\r\n                >\r\n                  {mining ? (\r\n                    <>\r\n                      <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\r\n                      Mining...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <i className=\"bi bi-hammer me-2\"></i>\r\n                      Mine Block\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n                             <Button \r\n                 variant=\"outline-primary\" \r\n                 onClick={() => setShowAddPeer(true)}\r\n                 aria-label=\"Add new peer\"\r\n               >\r\n                 <i className=\"bi bi-plus-circle me-2\"></i>\r\n                 Add Peer\r\n               </Button>\r\n               {usingRealData && (\r\n                 <Button \r\n                   variant=\"outline-secondary\" \r\n                   onClick={clearDemoData}\r\n                   aria-label=\"Clear demo data\"\r\n                   size=\"sm\"\r\n                 >\r\n                   <i className=\"bi bi-trash me-2\"></i>\r\n                   Clear Demo\r\n                 </Button>\r\n               )}\r\n            </div>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Blockchain Stats */}\r\n      <Row className=\"g-3 mb-4\">\r\n        <Col md={4}>\r\n          <Card className=\"text-center\">\r\n            <Card.Body>\r\n              <h3 className=\"text-primary mb-1\">{blocks.length}</h3>\r\n              <p className=\"text-muted mb-0\">Total Blocks</p>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card className=\"text-center\">\r\n            <Card.Body>\r\n              <h3 className=\"text-success mb-1\">\r\n                {blocks.reduce((total, block) => total + block.transactions.length, 0)}\r\n              </h3>\r\n              <p className=\"text-muted mb-0\">Total Transactions</p>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card className=\"text-center\">\r\n            <Card.Body>\r\n              <h3 className=\"text-info mb-1\">{peers.length}</h3>\r\n              <p className=\"text-muted mb-0\">Network Peers</p>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Blockchain Chain */}\r\n      <Card className=\"mb-4\">\r\n        <Card.Header>\r\n          <h5 className=\"mb-0\">Blockchain Chain</h5>\r\n        </Card.Header>\r\n        <Card.Body className=\"p-0\">\r\n          <Accordion>\r\n            {blocks.map((block, index) => (\r\n              <Accordion.Item key={block.index} eventKey={index.toString()}>\r\n                <Accordion.Header>\r\n                  <div className=\"d-flex align-items-center w-100\">\r\n                    <span className=\"fw-bold me-3\">Block #{block.index}</span>\r\n                    <Badge bg=\"secondary\" className=\"me-3\">\r\n                      {block.transactions.length} transactions\r\n                    </Badge>\r\n                    <small className=\"text-muted ms-auto\">\r\n                      {formatDate(block.timestamp)}\r\n                    </small>\r\n                  </div>\r\n                </Accordion.Header>\r\n                <Accordion.Body>\r\n                  <Row className=\"g-3 mb-3\">\r\n                    <Col md={6}>\r\n                      <strong>Hash:</strong> \r\n                      <code className=\"ms-2\">{truncateHash(block.hash)}</code>\r\n                    </Col>\r\n                    <Col md={6}>\r\n                      <strong>Previous Hash:</strong> \r\n                      <code className=\"ms-2\">{truncateHash(block.previous_hash)}</code>\r\n                    </Col>\r\n                    <Col md={6}>\r\n                      <strong>Nonce:</strong> {block.nonce}\r\n                    </Col>\r\n                    <Col md={6}>\r\n                      <strong>Timestamp:</strong> {formatDate(block.timestamp)}\r\n                    </Col>\r\n                  </Row>\r\n                  \r\n                  {block.transactions.length > 0 ? (\r\n                    <Table striped bordered size=\"sm\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Sender</th>\r\n                          <th>Recipient</th>\r\n                          <th>Action</th>\r\n                          <th>Data</th>\r\n                          <th>Timestamp</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {block.transactions.map((tx, txIndex) => {\r\n                          const txType = getTransactionType(tx.action);\r\n                          return (\r\n                            <tr key={txIndex}>\r\n                              <td>\r\n                                <code>{tx.from}</code>\r\n                              </td>\r\n                              <td>\r\n                                <code>{tx.to}</code>\r\n                              </td>\r\n                              <td>\r\n                                <Badge bg={txType.variant}>{txType.text}</Badge>\r\n                              </td>\r\n                              <td>\r\n                                <small className=\"text-muted\">\r\n                                  {formatTransactionData(tx.data)}\r\n                                </small>\r\n                              </td>\r\n                              <td>{formatDate(tx.timestamp)}</td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </Table>\r\n                  ) : (\r\n                    <Alert variant=\"info\" className=\"mb-0\">\r\n                      No transactions in this block\r\n                    </Alert>\r\n                  )}\r\n                </Accordion.Body>\r\n              </Accordion.Item>\r\n            ))}\r\n          </Accordion>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* Network Peers */}\r\n      <Card>\r\n        <Card.Header>\r\n          <h5 className=\"mb-0\">Network Peers</h5>\r\n        </Card.Header>\r\n        <Card.Body className=\"p-0\">\r\n          {peers.length > 0 ? (\r\n            <Table striped bordered className=\"mb-0\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Peer ID</th>\r\n                  <th>URL</th>\r\n                  <th>Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {peers.map((peer) => (\r\n                  <tr key={peer.id}>\r\n                    <td>\r\n                      <code>{peer.id}</code>\r\n                    </td>\r\n                    <td>\r\n                      <code>{peer.url}</code>\r\n                    </td>\r\n                    <td>\r\n                      <Badge bg={peer.is_active ? 'success' : 'danger'}>\r\n                        {peer.is_active ? 'Active' : 'Inactive'}\r\n                      </Badge>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          ) : (\r\n            <div className=\"text-center py-4\">\r\n              <i className=\"bi bi-wifi-off text-muted\" style={{ fontSize: '2rem' }}></i>\r\n              <p className=\"text-muted mt-2\">No peers connected</p>\r\n            </div>\r\n          )}\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* Add Peer Modal */}\r\n      <Modal show={showAddPeer} onHide={() => setShowAddPeer(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Add New Peer</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Form.Group>\r\n              <Form.Label htmlFor=\"peerUrl\">Peer URL</Form.Label>\r\n              <Form.Control\r\n                id=\"peerUrl\"\r\n                type=\"url\"\r\n                placeholder=\"http://localhost:5001\"\r\n                value={newPeerUrl}\r\n                onChange={(e) => setNewPeerUrl(e.target.value)}\r\n                aria-describedby=\"peerUrlHelp\"\r\n              />\r\n              <Form.Text id=\"peerUrlHelp\" className=\"text-muted\">\r\n                Enter the URL of the peer node you want to connect to\r\n              </Form.Text>\r\n            </Form.Group>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowAddPeer(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleAddPeer} disabled={!newPeerUrl.trim()}>\r\n            Add Peer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Toast Notification */}\r\n      <Toast\r\n        show={showToast}\r\n        message={toastMessage}\r\n        type={toastType}\r\n        onClose={() => setShowToast(false)}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Blockchain;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}